# K8s ConfigMaps

## Task 1

### visits endpoint

Python app:

```python
@app.get('/visits')
def read_visits():
    try:
        with open('./volume/visits') as f:
            visits = int(f.read())
    except FileNotFoundError:
        visits = 0

    return PlainTextResponse(str(visits))
```

Rust app:

```rust
#[rocket::get("/visits")]
fn visits() -> String {
    if let Ok(mut file) = File::open("volume/visits") {
        let mut content = String::new();
        file.read_to_string(&mut content).unwrap();
        content
    } else {
        "0".to_string()
    }
}
```

### Testing

```bash
docker ps -a
CONTAINER ID   IMAGE                           COMMAND                  CREATED         STATUS                            PORTS                                       NAMES
ccc9cee6a753   dvechtomova/python_app:latest   "gunicorn -k uvicornâ€¦"   5 seconds ago   Up 3 seconds (health: starting)   0.0.0.0:8080->8080/tcp, :::8080->8080/tcp   app_python
2a107c37ab38   dvechtomova/rust_app:latest     "/app/app_rust"          5 seconds ago   Up 3 seconds (health: starting)   0.0.0.0:8081->8080/tcp, :::8081->8080/tcp   app_rust

curl localhost:8080
2023-11-15T11:50:23.486697+03:00 
curl localhost:8080
2023-11-15T11:50:25.412268+03:00

curl localhost:8081
2023-11-15T11:50:27.262895816+03:00
curl localhost:8081
2023-11-15T11:50:28.166692355+03:00
curl localhost:8081
2023-11-15T11:50:29.108978708+03:00

curl localhost:8080/visits
2
curl localhost:8081/visits
3
```

## Task 2

### 
